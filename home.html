<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pok√©mon Trainer ‚Äì Arena</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  *{margin:0;padding:0;box-sizing:border-box;}
  body{
    min-height:100vh;
    color:white;
    display:flex;
    flex-direction:column;
    background:#000000;
    font-family:'Press Start 2P',cursive;
    position:relative;
    overflow-x:hidden;
  }

  /* Main Background Image */
  body::before{
    content:'';
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
  background: url('images/431.jpg') center/cover no-repeat;
      opacity: 0.35; /* Adjust opacity here (0.1 to 1.0) */
    z-index:-2;
    pointer-events:none;
  }

  /* Subtle Pok√©mon Watermark Pattern (on top of background) */
  body::after{
    content:'';
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><text x="50%" y="50%" font-family="Arial" font-size="120" fill="rgba(255,203,5,0.05)" text-anchor="middle" dominant-baseline="middle" transform="rotate(-45 100 100)">POK√âMON</text></svg>') repeat;
    opacity:0.2;
    z-index:-1;
    pointer-events:none;
  }

  body > header, body > .container, body > .game-menu{
    position:relative;
    z-index:1;
  }

  /* Rest of your styles unchanged */
  header h1, nav a, .name, label, .btn, .tab, .price { font-family:'Inter',system-ui,Segoe UI,Arial,sans-serif; }
  header h1 { font-family:'Press Start 2P',cursive; letter-spacing:.5px; }
  /* Sidebar */
  .sidebar{position:fixed;left:0;top:0;bottom:0;width:230px;background:linear-gradient(180deg,#0b1021,#0a0f1d);border-right:1px solid rgba(255,255,255,.08);z-index:20}
  .sidebar .brand{padding:16px;border-bottom:1px solid rgba(255,255,255,.08)}
  .sidebar .brand h1{font-size:1.3rem;color:#ffcb05;margin:0}
  .menu{padding:12px}
  .menu a{display:block;color:#ffcb05;text-decoration:none;font-weight:700;padding:10px 12px;border:2px solid rgba(255,203,5,.25);border-radius:10px;margin-bottom:10px;transition:.2s}
  .menu a:hover{background:rgba(255,203,5,.15);border-color:#fff;transform:translateX(4px)}
  .sidebar .status{position:absolute;left:12px;right:12px;bottom:12px;display:flex;flex-direction:column;gap:8px}
  .coins{display:inline-block;background:#ffeb3b;color:#1a2a6c;padding:6px 12px;border-radius:12px;font-weight:700;text-align:center}
  .wallet{text-align:center;color:#ddd}
  .logout-btn{background:#f44336;color:#fff;border:none;border-radius:10px;padding:8px 12px;font-weight:700;cursor:pointer}

  /* Pokemon Game Menu */
  .game-menu{
    flex:1;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    padding:2rem;
    position:relative;
  }
  .container-shift{margin-left:240px}

  .pokemon-logo-large{
    font-size:4rem;
    font-weight:bold;
    background:linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FFD700 100%);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
    text-shadow:0 0 20px rgba(255,215,0,.5);
    margin-bottom:10px;
    letter-spacing:8px;
    animation:glow 2s ease-in-out infinite alternate;
  }

  @keyframes glow{
    from{filter:drop-shadow(0 0 10px rgba(255,215,0,.5));}
    to{filter:drop-shadow(0 0 20px rgba(255,215,0,.8));}
  }

  .game-subtitle{
    font-size:1.2rem;
    color:#ffcb05;
    margin-bottom:3rem;
    letter-spacing:4px;
    text-shadow:2px 2px 4px rgba(0,0,0,.5);
  }

  .main-menu{
    display:flex;
    flex-direction:column;
    gap:12px;
    min-width:320px;
    margin-bottom:2rem;
  }

  .menu-btn{
    background:rgba(0,0,0,.8);
    border:3px solid #ffcb05;
    border-radius:8px;
    padding:16px 24px;
    color:#ffcb05;
    font-family:'Press Start 2P',cursive;
    font-size:0.9rem;
    cursor:pointer;
    display:flex;
    align-items:center;
    gap:15px;
    transition:all .3s;
    text-transform:uppercase;
    letter-spacing:2px;
    position:relative;
    overflow:hidden;
  }

  .menu-btn::before{
    content:'';
    position:absolute;
    left:0;
    top:0;
    height:100%;
    width:0;
    background:rgba(255,203,5,.2);
    transition:width .3s;
  }

  .menu-btn:hover::before{
    width:100%;
  }

  .menu-btn:hover{
    background:rgba(255,203,5,.15);
    border-color:#fff;
    transform:translateX(10px);
    box-shadow:0 0 15px rgba(255,203,5,.5);
  }

  .menu-btn:active{
    transform:translateX(5px);
  }

  .menu-icon{
    font-size:1.2rem;
    min-width:30px;
    text-align:center;
  }

  .menu-text{
    flex:1;
  }

  .trainer-info{
    position:absolute;
    bottom:2rem;
    right:2rem;
    background:rgba(0,0,0,.8);
    border:2px solid #ffcb05;
    border-radius:12px;
    padding:15px 20px;
    display:flex;
    flex-direction:column;
    gap:8px;
    min-width:200px;
  }

  .info-item{
    display:flex;
    justify-content:space-between;
    font-size:0.7rem;
    font-family:'Press Start 2P',cursive;
  }

  .info-label{
    color:#aaa;
  }

  .info-value{
    color:#ffcb05;
  }

  /* Tabs */
  .tab-content{display:none;padding:2rem;border-radius:20px;margin:1rem;background:rgba(0,0,0,.7);box-shadow:0 15px 35px rgba(0,0,0,.6);}
  .tab-content.active{display:block;}

  /* Arena */
  .arena{background:linear-gradient(to bottom,rgba(0,0,0,.8),rgba(0,0,0,.95));}
  .battlefield{display:flex;justify-content:space-around;align-items:flex-end;width:100%;max-width:900px;margin:30px 0;position:relative;}
  .pokemon{position:relative;text-align:center;min-width:180px;}
  .pokemon img{width:200px;height:200px;object-fit:contain;transition:transform .2s;filter: drop-shadow(0 6px 12px rgba(0,0,0,.6));}
  .pokemon.hit img{animation:shake .4s;}
  @keyframes shake{0%,100%{transform:translateX(0);}25%{transform:translateX(-8px);}50%{transform:translateX(8px);}75%{transform:translateX(-8px);}}
  .hp-bar{background:#333;border:2px solid #ffcb05;border-radius:10px;height:20px;width:160px;margin:10px auto;position:relative;overflow:hidden;}
  .hp-fill{height:100%;background:#4caf50;border-radius:8px;transition:width .5s ease,background .3s;}
  .hp-text{position:absolute;top:0;left:0;right:0;text-align:center;font-weight:600;font-size:13px;color:white;text-shadow:1px 1px 2px #000;}
  .name{font-weight:700;color:#ffcb05;font-size:1.3rem;text-shadow:1px 1px 3px #000;margin-bottom:4px;}

  .moves{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:20px;width:100%;max-width:500px;}
  .move-btn{padding:14px;background:rgba(255,255,255,.1);border:2px solid #ffcb05;border-radius:12px;color:white;font-weight:600;cursor:pointer;transition:.3s;}
  .move-btn:hover{background:rgba(255,203,5,.2);}
  .move-btn:disabled{background:#444;cursor:not-allowed;opacity:.6;}

  .log{background:rgba(0,0,0,.7);padding:16px;border-radius:12px;max-height:140px;overflow-y:auto;font-size:15px;margin-top:20px;width:100%;max-width:900px;border:1px solid rgba(255,203,5,.3);}
  .log p{margin:6px 0;opacity:.9;}
  .log .player{color:#4caf50;}
  .log .opponent{color:#ff5252;}
  .log .system{color:#ffcb05;font-weight:600;}

  /* Shop */
  .shop-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:16px;margin-top:20px;}
  .shop-card{background:rgba(255,255,255,.1);border:2px solid #ffcb05;border-radius:12px;padding:14px;text-align:center;transition:.3s;}
  .shop-card:hover{transform:scale(1.05);background:rgba(255,203,5,.2);}
  .shop-card img{width:140px;height:140px;object-fit:contain;margin:8px 0;filter: drop-shadow(0 4px 10px rgba(0,0,0,.5));}
  .shop-card .price{color:#ffeb3b;font-weight:700;font-size:1.1rem;}
  .shop-card button{margin-top:8px;padding:8px 16px;background:#4caf50;color:white;border:none;border-radius:8px;cursor:pointer;font-weight:600;}
  .shop-card button:disabled{background:#666;cursor:not-allowed;}
  .shop-card button:hover:not(:disabled){background:#388e3c;}

  /* My Pok√©mon */
  .my-pokemon-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:14px;margin-top:16px;}
  .my-card{background:rgba(0,0,0,.5);border:2px solid #ffcb05;border-radius:12px;padding:12px;text-align:center;position:relative;}
  .my-card.equipped::after{content:"‚òÖ";position:absolute;top:8px;right:8px;color:#ffeb3b;font-size:1.4rem;}
  .my-card img{width:120px;height:120px;object-fit:contain;}
  .equip-btn{margin-top:6px;padding:6px 12px;background:#ff9800;color:white;border:none;border-radius:6px;cursor:pointer;font-size:0.9rem;}
  .equip-btn:hover{background:#f57c00;}

  .tournament-list{margin:1.5rem;padding:1.5rem;background:rgba(100,65,165,.8);border-radius:16px;}
  .tournament-item{background:rgba(0,0,0,.4);margin:10px 0;padding:14px;border-radius:12px;display:flex;justify-content:space-between;align-items:center;font-size:15px;}
  .trophy{font-size:1.5rem;}

  .logout{margin:2rem auto;display:block;padding:.9rem 2.5rem;background:#f44336;color:white;border:none;border-radius:12px;font-weight:600;cursor:pointer;}
  .logout:hover{background:#d32f2f;}

  .coins{display:inline-block;background:#ffeb3b;color:#1a2a6c;padding:6px 12px;border-radius:12px;font-weight:700;margin-left:10px;font-size:0.9rem;}
  .wallet{margin-left:12px;font-size:.9rem;color:#ddd}
  .settings-btn{margin-left:12px;color:#ffcb05;text-decoration:none;font-weight:600;}
  .settings-btn:hover{color:#fff}
  .logout-btn{margin-left:12px;background:#f44336;color:#fff;border:none;border-radius:10px;padding:8px 12px;font-weight:700;cursor:pointer}

  /* Settings */
  .settings-panel{display:none;padding:2rem;border-radius:20px;margin:1rem;background:rgba(0,0,0,.7);box-shadow:0 15px 35px rgba(0,0,0,.6);}
  .settings-panel.active{display:block;}
  .settings-field{margin:10px 0}
  .settings-field label{display:block;margin-bottom:6px;color:#ffcb05}
  .settings-field input, .settings-field select{padding:10px 12px;border-radius:10px;border:1px solid rgba(255,203,5,.4);background:rgba(255,255,255,.1);color:#fff;width:100%}
  .save-settings{margin-top:10px;padding:10px 16px;background:#4caf50;color:#fff;border:none;border-radius:10px;font-weight:700;cursor:pointer}

  @media(max-width:700px){
    .battlefield{flex-direction:column;align-items:center;gap:30px;}
    .pokemon img{width:120px;height:120px;}
    .hp-bar{width:120px;}
    .moves{grid-template-columns:1fr;}
    .shop-grid{grid-template-columns:1fr 1fr;}
  }
</style>
</head>
<body>
  <aside class="sidebar">
    <div class="brand"><h1>PikaPlay Trainer</h1></div>
    <div class="menu">
       <a href="home.html">üè† Home</a>
      <a href="arena.html">‚öî Arena</a>
      <a href="shop.html">üõí Shop</a>
      <a href="settings.html">‚öô Settings</a>
    </div>
    <div class="status">
      <span class="coins" id="coinDisplay">‚àû Coins</span>
      <span class="wallet" id="walletDisplay"></span>
      <button class="logout-btn" id="logoutBtn">Logout</button>
    </div>
  </aside>

  <!-- Pokemon Game Welcome Screen -->
  <div class="game-menu container-shift" id="gameMenu">
    <div class="pokemon-logo-large"></div>
    <div class="game-subtitle"></div>
    
    <div class="main-menu">

      <button class="menu-btn" id="continueBtn">
        <span class="menu-icon">‚ñ∂</span>
        <span class="menu-text">CONTINUE</span>
      </button>

      <button class="menu-btn" id="arenaBtn">
        <span class="menu-icon">‚öî</span>
        <span class="menu-text">BATTLE ARENA</span>
      </button>
      
      <button class="menu-btn" id="shopBtn">
        <span class="menu-icon">üõí</span>
        <span class="menu-text">POK√âMON SHOP</span>
      </button>
      
      <button class="menu-btn" id="settingsBtn">
        <span class="menu-icon">‚öô</span>
        <span class="menu-text">SETTINGS</span>
      </button>
    </div>

    <div class="trainer-info">
      <div class="info-item">
        <span class="info-label">Trainer:</span>
        <span class="info-value" id="trainerName">---</span>
      </div>
      <div class="info-item">
        <span class="info-label">Coins:</span>
        <span class="info-value" id="trainerCoins">0</span>
      </div>
    </div>
  </div>

  
  <script>
    // === Session ===
    const session = JSON.parse(localStorage.getItem('trainerSession'));
    if (!session) location.href = 'index.html';
    // Update trainer info
    const trainerName = document.getElementById('trainerName');
    trainerName.textContent = session.type === 'metamask' 
      ? `${session.address.slice(0,6)}...${session.address.slice(-4)}`
      : session.address.split('@')[0];

    // === DOM ===
    const walletDisplay = document.getElementById('walletDisplay');

    // === Player & Coins ===
    let player = { id: 25, name: "Pikachu", hp: 100, maxHp: 100 };
    const USER_ID = session.type === 'metamask' ? session.address.toLowerCase() : session.address.toLowerCase();
    const ns = (k) => `${USER_ID}:${k}`;
    const COIN_KEY = ns('coins');
    const STARTER_KEY = ns('starterClaimed');
    const SETTINGS_KEY = ns('settings');
    const WALLET = session.type === 'metamask' ? session.address : null;
    if (WALLET) walletDisplay.textContent = WALLET.slice(0,6)+"..."+WALLET.slice(-4);

    function getCoins(){ return parseInt(localStorage.getItem(COIN_KEY) || '0'); }
    function setCoins(v){ 
      localStorage.setItem(COIN_KEY, String(v));
      localStorage.setItem('coins', String(v));
      document.getElementById('coinDisplay').textContent = v + ' Coins';
      document.getElementById('trainerCoins').textContent = v;
    }
    if (localStorage.getItem(COIN_KEY) === null) { setCoins(500); } else { setCoins(getCoins()); }


    // === Shop ===
    function loadStarters(){
      const claimed = localStorage.getItem(STARTER_KEY) === '1';
      starterGrid.innerHTML = '';
      starterNotice.style.display = claimed ? 'none' : 'block';
      if (claimed) return;
      starterPokemon.forEach(poke => {
        const card = document.createElement('div');
        card.className = 'shop-card';
        card.innerHTML = `
          <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${poke.id}.png" alt="${poke.name}">
          <div class="name">${poke.name}</div>
          <div class="price">Free Starter</div>
          <button>Claim</button>
        `;
        card.querySelector('button').onclick = () => claimStarter(poke);
        starterGrid.appendChild(card);
      });
    }

    function claimStarter(poke){
      if (!ownedPokemon.some(o=>o.id===poke.id)){
        ownedPokemon.push({ id: poke.id, name: poke.name });
        localStorage.setItem('ownedPokemon', JSON.stringify(ownedPokemon));
      }
      const ownedStarters = ownedPokemon.filter(o=>[1,4,7].includes(o.id)).length;
      if (ownedStarters >= 3) { localStorage.setItem(STARTER_KEY,'1'); }
      loadStarters();
      loadMyPokemon();
    }

    function loadShop() {
      shopGrid.innerHTML = '';
      shopPokemon.forEach(poke => {
        const owned = ownedPokemon.some(o => o.id === poke.id);
        const card = document.createElement('div');
        card.className = 'shop-card';
        card.innerHTML = `
          <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${poke.id}.png" alt="${poke.name}">
          <div class="name">${poke.name}</div>
          <div class="price">${poke.price} Coins</div>
          <button ${owned ? 'disabled' : ''}>${owned ? 'Owned' : 'Buy'}</button>
        `;
        if (!owned) {
          card.querySelector('button').onclick = () => buyPokemon(poke);
        }
        shopGrid.appendChild(card);
      });
    }

    function buyPokemon(poke) {
      const coins = getCoins();
      if (coins < poke.price) { alert('Not enough coins'); return; }
      if (!ownedPokemon.some(o => o.id === poke.id)) {
        setCoins(coins - poke.price);
        ownedPokemon.push({ id: poke.id, name: poke.name });
        localStorage.setItem('ownedPokemon', JSON.stringify(ownedPokemon));
        loadShop();
        loadMyPokemon();
        alert(`You bought ${poke.name}!`);
      }
    }

    // === My Pok√©mon ===
    function loadMyPokemon() {
      myPokemonList.innerHTML = '';
      if (ownedPokemon.length === 0) {
        myPokemonList.innerHTML = '<p style="grid-column:1/-1;text-align:center;color:#aaa;">No Pok√©mon yet. Visit the shop!</p>';
        return;
      }
      ownedPokemon.forEach(poke => {
        const card = document.createElement('div');
        card.className = `my-card ${poke.id === equippedId ? 'equipped' : ''}`;
        card.innerHTML = `
          <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${poke.id}.png" alt="${poke.name}">
          <div>${poke.name}</div>
          <button class="equip-btn" ${poke.id === equippedId ? 'disabled' : ''}>
            ${poke.id === equippedId ? 'Equipped' : 'Equip'}
          </button>
        `;
        if (poke.id !== equippedId) {
          card.querySelector('.equip-btn').onclick = () => equipPokemon(poke.id);
        }
        myPokemonList.appendChild(card);
      });
    }

    function equipPokemon(id) {
      equippedId = id;
      localStorage.setItem('equippedPokemon', id);
      loadEquipped();
      loadMyPokemon();
      if (battleActive) startNewBattle(); 
    }

    // === Battle Logic ===
    let opponent = null;
    let battleActive = false;
    let playerTurn = true;

    const moves = {
      thunderbolt: { name: "Thunderbolt", power: 30, color: "#ffeb3b" },
      quickattack: { name: "Quick Attack", power: 20, color: "#81c784" },
      irontail: { name: "Iron Tail", power: 40, color: "#9e9e9e" },
      run: { name: "Run Away", power: 0, color: "#ff9800", run: true }
    };

    enterArenaBtn.addEventListener('click', () => {
      welcomeSection.style.display = 'none';
      showTab('arena');
      startNewBattle();
    });

    async function startNewBattle() {
      battleActive = true;
      playerTurn = true;
      player.hp = player.maxHp;
      battleLog.innerHTML = '';
      newBattleBtn.style.display = 'none';
      moveButtons.forEach(b => b.disabled = false);
      loadEquipped();

      const oppId = Math.floor(Math.random() * 150) + 1;
      const res = await fetch(`https://pokeapi.co/api/v2/pokemon/${oppId}`);
      const data = await res.json();
      opponent = {
        id: oppId,
        name: data.name.charAt(0).toUpperCase() + data.name.slice(1),
        hp: 100,
        maxHp: 100
      };
      opponentSprite.src = `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${oppId}.png`;
      opponentName.textContent = opponent.name;
      updateHP(opponentHP, opponentHPText, opponent.hp, opponent.maxHp);

      log(`A wild <strong>${opponent.name}</strong> appeared!`, 'system');
      log(`What will <strong>${player.name}</strong> do?`, 'system');
    }

    moveButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        if (!battleActive || !playerTurn) return;
        const moveKey = btn.dataset.move;
        const move = moves[moveKey];

        if (move.run) {
          log(`<strong>${player.name}</strong> ran away!`, 'system');
          endBattle(false, true);
          return;
        }

        const damage = Math.floor(Math.random() * 8) + move.power;
        opponent.hp = Math.max(0, opponent.hp - damage);

        log(`<strong>${player.name}</strong> used <span style="color:${move.color}">${move.name}</span>!`, 'player');
        log(`${opponent.name} took <strong>${damage}</strong> damage.`, 'player');
        updateHP(opponentHP, opponentHPText, opponent.hp, opponent.maxHp);
        document.getElementById('opponentPokemon').classList.add('hit');
        setTimeout(() => document.getElementById('opponentPokemon').classList.remove('hit'), 400);

        if (opponent.hp === 0) {
          setTimeout(() => endBattle(true), 600);
          return;
        }

        playerTurn = false;
        moveButtons.forEach(b => b.disabled = true);

        setTimeout(() => {
          const oppMove = ['Tackle', 'Scratch', 'Ember', 'Vine Whip'][Math.floor(Math.random() * 4)];
          const oppDmg = Math.floor(Math.random() * 25) + 15;
          player.hp = Math.max(0, player.hp - oppDmg);

          log(`${opponent.name} used <strong>${oppMove}</strong>!`, 'opponent');
          log(`You took <strong>${oppDmg}</strong> damage.`, 'opponent');
          updateHP(playerHP, playerHPText, player.hp, player.maxHp);
          document.getElementById('playerPokemon').classList.add('hit');
          setTimeout(() => document.getElementById('playerPokemon').classList.remove('hit'), 400);

          if (player.hp === 0) {
            setTimeout(() => endBattle(false), 600);
          } else {
            playerTurn = true;
            moveButtons.forEach(b => b.disabled = false);
          }
        }, 1200);
      });
    });

    function endBattle(won, ran = false) {
      battleActive = false;
      moveButtons.forEach(b => b.disabled = true);

      const tournaments = JSON.parse(localStorage.getItem('tournaments') || '[]');
      tournaments.push({
        player: player.name,
        opponent: opponent.name,
        won: won && !ran,
        date: new Date().toLocaleString()
      });
      localStorage.setItem('tournaments', JSON.stringify(tournaments));
      loadTournaments();

      if (won && !ran) {
        log(`<strong style=\"color:#4caf50;\">Victory! You won the tournament! Trophy</strong>`, 'system');
        const reward = 100;
        setCoins(getCoins() + reward);
        log(`You earned <strong>${reward}</strong> coins!`, 'system');
      } else if (ran) {
        log(`<strong style="color:#ff9800;">You escaped safely.</strong>`, 'system');
      } else {
        log(`<strong style=\"color:#f44336;\">Defeat... Better luck next time.</strong>`, 'system');
      }

      newBattleBtn.style.display = 'block';
    }

    newBattleBtn.addEventListener('click', startNewBattle);

    // === Helpers ===
    function updateHP(bar, textEl, hp, max) {
      const percent = (hp / max) * 100;
      bar.style.width = percent + '%';
      textEl.textContent = `${hp}/${max}`;
      bar.style.background = percent > 50 ? '#4caf50' : percent > 25 ? '#ff9800' : '#f44336';
    }

    function log(msg, type = '') {
      const p = document.createElement('p');
      p.innerHTML = msg;
      if (type) p.className = type;
      battleLog.appendChild(p);
      battleLog.scrollTop = battleLog.scrollHeight;
    }

    function showTab(tabName) {
      Object.values(tabs).forEach(t => t.classList.remove('active'));
      tabs[tabName].classList.add('active');
      if (tabName === 'shop') loadShop();
      if (tabName === 'myPokemon') loadMyPokemon();
    }

    // === Navigation ===
    document.getElementById('navArena').setAttribute('href','arena.html');
    document.getElementById('navShop').setAttribute('href','shop.html');
    document.getElementById('navSettings').setAttribute('href','settings.html');
    document.getElementById('logoutBtn').onclick = () => {
      localStorage.removeItem('trainerSession');
      location.href = 'index.html';
    };

    // === Game Menu Buttons ===
    document.getElementById('continueBtn').onclick = () => {
      location.href = 'arena.html';
    };
    document.getElementById('arenaBtn').onclick = () => {
      location.href = 'arena.html';
    };
    document.getElementById('shopBtn').onclick = () => {
      location.href = 'shop.html';
    };
    
    document.getElementById('settingsBtn').onclick = () => {
      location.href = 'settings.html';
    };

    // === Settings ===
    function loadSettings(){
      // Settings loading if needed
    }
  </script>
</body>
</html>