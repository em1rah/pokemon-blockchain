<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Settings</title>
   <link rel="icon" href="images/favicon.png" sizes="32x32">
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      min-height:100vh;
      color:white;
      background:#000000;
       font-family:'Inter',sans-serif;
      position:relative;
      overflow-x:hidden;
      transition: background 0.4s ease;
    }
    body::before{
      content:'';
      position:fixed;
      top:0;left:0;width:100%;height:100%;
      background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><text x="50%" y="50%" font-family="Arial" font-size="120" fill="rgba(255,203,5,0.05)" text-anchor="middle" dominant-baseline="middle" transform="rotate(-45 100 100)">POK√âMON</text></svg>') repeat;
      opacity:0.3;z-index:0;pointer-events:none;
      transition: opacity 0.4s ease;
    }

    .theme-starter body { 
      background: linear-gradient(135deg, #1a3e1a 0%, #1e4a1e 50%, #162816 100%);
    }
    .theme-starter body::before { opacity: 0.2; }
    .theme-starter .sidebar { background: linear-gradient(180deg, #1a3e1a, #162816); }
    .theme-starter input, .theme-starter select { border-color: #4caf50; }
    .theme-starter .save { background: #8bc34a; }
    .theme-starter .theme-card.active { border-color: #4caf50; box-shadow: 0 0 0 3px rgba(76,175,80,.3) inset; }

    .theme-common body { 
      background: linear-gradient(135deg, rgba(20, 20, 40, 0.8) 0%, rgba(10, 10, 30, 0.9) 100%);
    }
    .theme-common body::before { opacity: 0.3; }
    .theme-common .sidebar { background: linear-gradient(180deg, #0b1021, #0a0f1d); }
    .theme-common input, .theme-common select { border-color: #ffcb05; }
    .theme-common .save { background: #ffcb05; color: #000; }
    .theme-common .theme-card.active { border-color: #ffcb05; box-shadow: 0 0 0 3px rgba(255,203,5,.3) inset; }

    .theme-rare body { 
      background: linear-gradient(135deg, #2d1b3d 0%, #1a0f26 50%, #0d0513 100%);
    }
    .theme-rare body::before { opacity: 0.25; }
    .theme-rare .sidebar { background: linear-gradient(180deg, #2d1b3d, #0d0513); }
    .theme-rare input, .theme-rare select { border-color: #9c27b0; }
    .theme-rare .save { background: #9c27b0; }
    .theme-rare .theme-card.active { border-color: #9c27b0; box-shadow: 0 0 0 3px rgba(156,39,176,.3) inset; }

    .sidebar{position:fixed;left:0;top:0;bottom:0;width:230px;background:linear-gradient(180deg,#0b1021,#0a0f1d);border-right:1px solid rgba(255,255,255,.08);z-index:20; transition: background 0.4s ease;}
    .sidebar .brand{padding:16px;border-bottom:1px solid rgba(255,255,255,.08)}
    .sidebar .brand h1{font-family:'Press Start 2P',cursive;color:#ffcb05;font-size:1.1rem;margin:0}
    .menu{padding:12px}
    .menu a{display:block;color:#ffcb05;text-decoration:none;font-weight:700;padding:10px 12px;border:2px solid rgba(255,203,5,.25);border-radius:10px;margin-bottom:10px;transition:.2s}
    .menu a:hover{background:rgba(255,203,5,.15);border-color:#fff;transform:translateX(4px)}
    .status{position:absolute;left:12px;right:12px;bottom:12px;display:flex;flex-direction:column;gap:8px}
    .coins{color:#efe339;padding:8px 14px;border-radius:12px;font-weight:700;font-size:0.9rem;display:inline-block;box-shadow:0 2px 4px rgba(0,0,0,0.3);text-align:center}
    .wallet{text-align:center;color:#ddd}
    .logout-btn{background:#f44336;color:#fff;border:none;border-radius:10px;padding:8px 12px;font-weight:700;cursor:pointer}

    .container{padding:1.5rem;font-family:'Inter',system-ui;margin-left:240px}
    .title{color:#ffcb05;font-size:1.6rem;margin-bottom:.75rem}
    .field{margin:12px 0}
    
    .theme-section{margin: 2rem 0;}
    .theme-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:12px;margin-top:8px}
    .theme-card{position:relative;border:2px solid rgba(255,255,255,.2);border-radius:14px;overflow:hidden;cursor:pointer;transition:.3s;background:#101425}
    .theme-card:hover{transform:translateY(-2px);border-color:#ffcb05}
    .theme-card input{position:absolute;inset:0;opacity:0;cursor:pointer}
    .theme-thumb{height:84px;background-size:cover;background-position:center;transition: all 0.3s ease;}
    .theme-meta{padding:10px;display:flex;align-items:center;justify-content:space-between}
    .theme-name{font-weight:700;color:#ffcb05;font-size:0.85rem}
    .theme-badge{width:10px;height:10px;border:2px solid #ffcb05;border-radius:50%;}
    .theme-card.active{border-color:#ffcb05;box-shadow:0 0 0 3px rgba(255,203,5,.15) inset}

    label{display:block;margin-bottom:6px;color:#ffcb05}
    input,select{padding:10px 12px;border-radius:10px;border:1px solid rgba(255,203,5,.4);background:rgba(255,255,255,.1);color:#fff;width:100%;transition: border-color 0.3s ease;}
    .save{margin-top:12px;padding:10px 16px;background:#4caf50;border:none;border-radius:10px;color:#fff;font-weight:700;cursor:pointer;transition: background 0.3s ease;}
  </style>
</head>
<body>
  <aside class="sidebar">
    <div class="brand"><h1>PikaPlay Settings</h1></div>
    <div class="menu">
         <a href="home.html">üè† Home</a>
        <a href="shop.html">üõí Marketplace</a>
      <a href="arena.html">‚öî Game Play</a>
      <a href="settings.html">‚öô Settings</a>
    </div>
    <div class="status">
      <span class="coins" id="coinDisplay">0 Coins</span>
      <span class="wallet" id="walletDisplay"></span>
      <button class="logout-btn" id="logoutBtn">Logout</button>
    </div>
  </aside>

  <div class="container">
    <div class="title">Display Name</div>
    <div class="field">
     
      <input id="displayName" type="text" placeholder="Enter display name"/>
    </div>

    <div class="title" style="margin-top: 2rem;">Theme</div>
    <div class="theme-section">
      <div class="theme-grid">
        <label class="theme-card" data-theme="starter">
          <input type="radio" name="theme" value="starter">
          <div class="theme-thumb" style="background: linear-gradient(135deg, #1a3e1a, #162816);"></div>
          <div class="theme-meta">
            <span class="theme-name">Green</span>
            <div class="theme-badge"></div>
          </div>
        </label>

        <label class="theme-card" data-theme="common">
          <input type="radio" name="theme" value="common">
          <div class="theme-thumb" style="background: linear-gradient(135deg, rgba(20,20,40,0.8), rgba(10,10,30,0.9));"></div>
          <div class="theme-meta">
            <span class="theme-name">Dark</span>
            <div class="theme-badge"></div>
          </div>
        </label>

        <label class="theme-card" data-theme="rare">
          <input type="radio" name="theme" value="rare">
          <div class="theme-thumb" style="background: linear-gradient(135deg, #2d1b3d, #0d0513);"></div>
          <div class="theme-meta">
            <span class="theme-name">Purple</span>
            <div class="theme-badge"></div>
          </div>
        </label>
      </div>
    </div>

    <button class="save" id="saveBtn" style="margin-top:18px;">Save Settings</button>
  </div>

  <script>
    const session = JSON.parse(localStorage.getItem('trainerSession'));
    if (!session) location.href = 'index.html';
    const USER_ID = session.type === 'metamask' ? session.address.toLowerCase() : session.address.toLowerCase();
    const ns = (k) => `${USER_ID}:${k}`;
    const COIN_KEY = ns('coins');
    const SETTINGS_KEY = ns('settings');

    const walletDisplay = document.getElementById('walletDisplay');
    if (session.type==='metamask') walletDisplay.textContent = session.address.slice(0,6)+"..."+session.address.slice(-4);
    document.getElementById('logoutBtn').onclick = () => { localStorage.removeItem('trainerSession'); location.href = 'index.html'; };

    function getCoins(){ return parseInt(localStorage.getItem(COIN_KEY) || '0'); }
    function setCoins(v){ localStorage.setItem(COIN_KEY, String(v)); document.getElementById('coinDisplay').textContent = v + ' Coins'; }
    if (localStorage.getItem(COIN_KEY) === null) setCoins(500); else setCoins(getCoins());


    const themeCards = document.querySelectorAll('.theme-card');
    const body = document.body;

    function applyTheme(theme) {
      body.classList.remove('theme-starter', 'theme-common', 'theme-rare');
      if (theme && theme !== 'common') {
        body.classList.add(`theme-${theme}`);
      }
      themeCards.forEach(card => {
        card.classList.toggle('active', card.dataset.theme === theme);
        card.querySelector('input').checked = (card.dataset.theme === theme);
      });
    }

    function load() {
      const s = JSON.parse(localStorage.getItem(SETTINGS_KEY) || '{}');
      document.getElementById('displayName').value = s.displayName || '';
      applyTheme(s.theme || 'common'); 
    }

    themeCards.forEach(card => {
      card.addEventListener('click', () => {
        const theme = card.dataset.theme;
        const settings = JSON.parse(localStorage.getItem(SETTINGS_KEY) || '{}');
        settings.theme = theme;
        localStorage.setItem(SETTINGS_KEY, JSON.stringify(settings));
        applyTheme(theme);
      });
    });

    document.getElementById('saveBtn').onclick = () => {
      const name = document.getElementById('displayName').value.trim();
      const theme = document.querySelector('input[name="theme"]:checked')?.value || 'common';
      const s = { displayName: name, theme };
      localStorage.setItem(SETTINGS_KEY, JSON.stringify(s));
      alert('Settings saved!');
    };

    load();
  </script>
</body>
</html>